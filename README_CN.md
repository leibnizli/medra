# Medra - 媒体压缩工具

一款简洁高效的 iOS 应用，用于压缩图片、视频和音频文件。提供丰富的自定义选项以满足您的个性化需求。完全本地运行，无需网络，保护您的隐私和安全。

[![Download on the App Store](https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg)](https://apps.apple.com/us/app/id6755109910)

## 核心功能

- 支持批量选择图片、视频和音频（最多 20 个文件）
- 支持多种媒体格式
  - 图片：JPEG/PNG/HEIC/WebP/AVIF/GIF
  - 视频：MOV/MP4/M4V/WebM
  - 音频：MP3/M4A/AAC/WAV/FLAC/OGG
- 实时处理进度显示
- 智能质量保护机制

## 三大主要媒体类型

### 1. 视频工具

#### 视频压缩

- 支持 MOV/MP4/M4V 格式
- 使用 FFmpeg 硬件加速编码（VideoToolbox）
- 支持 H.264 和 H.265/HEVC 编码
- 可调节分辨率（原图/4K/2K/1080p/720p）
- 可调节帧率（23.98-60 fps，仅支持降低帧率）
- 元数据控制：默认保留容器标签，当禁用"保留元数据"时，使用 FFmpeg `-map_metadata -1` 从导出文件中移除元数据
- 码率控制：
  - **自动模式**（默认）：根据目标分辨率智能调整
    - 720p ≈ 1.5 Mbps
    - 1080p ≈ 3 Mbps
    - 2K ≈ 5 Mbps
    - 4K ≈ 8 Mbps
  - **自定义模式**：手动设置码率（500-15000 kbps）
  - ⚠️ 实际码率可能低于目标值（VideoToolbox 会根据内容复杂度动态调整以优化效率）
- 智能决策：如果压缩后版本更大，则保留原文件

#### 视频格式转换

- 批量转换视频格式：MP4 ↔ MOV ↔ M4V ↔ WebM
- 无损转换（在可能的情况下），保持原始质量
- **智能音频拷贝**：兼容时自动拷贝音频流，避免重编码
- **智能编码**：需要重编码时，自动使用硬件加速（VideoToolbox）处理 H.264/HEVC，或使用 VP9 处理 WebM
- **码率保持**：重编码时保持原始视频码率，最大程度减少画质损失

#### 视频转动画

- 将视频转换为动态 WebP、AVIF 或 GIF
- **自动优化**：使用优化预设（15 fps，高质量），在文件大小和质量之间取得最佳平衡
- **高效率**：使用 libaom-av1 直接转换 AVIF，实现卓越压缩

#### 提取音频

- 从视频文件中提取音频轨道
- 保存为 MP3、M4A、AAC、FLAC、WAV 或 OGG

### 2. 图片工具

#### 图片压缩

- 支持 JPEG/PNG/HEIC/WebP/AVIF/GIF 格式
- 使用 MozJPEG 进行高质量 JPEG 压缩
- 使用 pngquant + 可选 Zopfli 进行 PNG 压缩（有损量化 + 无损 deflate）
- **动态 WebP/AVIF/GIF 支持**：
  - 自动检测动态文件
  - 可选择保留动画或转换为静态图片
  - 逐帧压缩，保持时间轴信息
  - 智能回退：如果压缩后的无损格式更大，则保留原文件
  - 视觉指示器：清晰显示动画状态和帧数信息
- 可调节压缩质量（10%-100%）
- 支持分辨率调整（原图/4K/2K/1080p/720p）
- 自动方向检测（横屏/竖屏）
- 智能决策：如果压缩后版本更大，则保留原文件

#### 图片格式转换

- 批量转换图片格式：JPEG ↔ PNG ↔ WebP ↔ HEIC ↔ AVIF ↔ GIF
- 不进行压缩，仅修改格式

### 3. 音频工具

#### 音频压缩

- 支持 MP3/M4A/AAC/WAV/FLAC/OGG 输入
- 8 种码率选项（32-320 kbps）
- 7 种采样率选项（8-48 kHz）
- 声道选择（单声道/立体声）
- 智能质量保护：防止低质量音频被"升频"
- 智能决策：如果压缩后版本更大，则保留原文件

#### 音频格式转换

- 批量转换音频格式：MP3 ↔ M4A ↔ FLAC ↔ WAV ↔ WebM
- 无损转换（在可能的情况下）

#### 语音转文字

- 使用 Apple Speech 框架将音频文件转录为文字
- 支持多种语言（英语、中文、日语、韩语、西班牙语、法语、德语、意大利语、葡萄牙语、俄语）
- 复制转录内容到剪贴板

#### 文字转语音

- 将文字转换为音频文件
- 支持多种语言和语音（优化选择体验）
- 可调节音调和语速
- 支持导入文本文件
- 保存到文件/iCloud（WAV 格式），带进度提示

## 联系方式

如有问题或建议，请联系：<stormte@gmail.com>
